/*
 bondHoverBlock - jQuery plugin
 Author: Bondarenko Aleksey
 Homepage: http://www.alexbond.ru
 */
(function(e){e.fn.bondHoverBlock=function(t){function o(){r.data({top:r.css("top")=="auto"?"":r.css("top")});r.data({opacity:r.css("opacity")==1?1:r.css("opacity")});if(t.opacityMouseOver){if(t.opacityShow!=null){r.data({opacity:t.opacityShow})}if(r.data("opacity")<t.opacityHide)t.opacityHide=r.data("opacity")}if(t.isCopy){var n=e(document.createElement("div"));n.css({width:r.outerWidth(true),height:r.outerHeight(true)});n.addClass(t.wrapClass);r.data({wrap:n})}}function u(){e(window).scroll(function(n){function a(){r.toggleClass(t.toggleClass);r.css({top:r.data("top")})}var o=e(window).scrollTop();if(o-t.topPosWindow>=i.top-t.topPosblock){if(!s.isFix){r.css({opacity:0});r.css({top:t.topPosblock});r.toggleClass(t.toggleClass);s.isFix=true;if(t.isCopy){r.wrap(r.data("wrap"));var u=null;u=t.opacityMouseOver?t.opacityHide:r.data("opacity");r.stop().animate({opacity:u},t.showSpeed,s.effect)}else{r.css({opacity:r.data("opacity")})}}}else{if(s.isFix){s.isFix=false;if(t.isCopy){r.stop().animate({opacity:0},t.hideSpeed,s.effect,function(){a();r.css({opacity:r.data("opacity")});r.unwrap()})}else a()}}});if(t.opacityMouseOver){r.mouseenter(function(e){r.stop().animate({opacity:r.data("opacity")},t.opacityShowSpeed,s.effect)});r.mouseleave(function(e){r.stop().animate({opacity:t.opacityHide},t.opacityHideSpeed,s.effect)})}}function a(e){if(e.getBoundingClientRect){return l(e)}else{return f(e)}}function f(e){var t=0,n=0;while(e){t=t+parseInt(e.offsetTop);n=n+parseInt(e.offsetLeft);e=e.offsetParent}return{top:t,left:n}}function l(e){var t=e.getBoundingClientRect();var n=document.body;var r=document.documentElement;var i=window.pageYOffset||r.scrollTop||n.scrollTop;var s=window.pageXOffset||r.scrollLeft||n.scrollLeft;var o=r.clientTop||n.clientTop||0;var u=r.clientLeft||n.clientLeft||0;var a=t.top+i-o;var f=t.left+s-u;return{top:Math.round(a),left:Math.round(f)}}var n={topPosblock:0,topPosWindow:0,isCopy:!0,showSpeed:400,hideSpeed:0,opacityMouseOver:!1,opacityShow:null,opacityHide:.4,opacityShowSpeed:400,opacityHideSpeed:400,toggleClass:"bondFix",wrapClass:"bondWrap"};var t=e.extend(n,t);t.effect="linear";var r=this;var i=a(this.get(0));var s={isFix:null};o();u()}})(jQuery)