/*
 bondHoverBlock - jQuery plugin
 Author: Bondarenko Aleksey
 Homepage: http://www.alexbond.ru
 */
(function(e){e.fn.bondHoverBlock=function(t){function s(){var n=r.css("top")=="auto"?"":parseInt(r.css("top"),10);if(r.css("position")!="fixed"){i.positionBlock=u(r.get(0))}else{i.positionBlock={top:n,left:null}}r.data({top:n});r.data({opacity:r.css("opacity")==1?1:r.css("opacity")});if(t.opacityInit!=null)r.data({opacity:t.opacityInit});if(t.isCopy){var s=e(document.createElement("div"));s.css({width:r.outerWidth(true),height:r.outerHeight(true)});s.addClass(t.wrapClass);r.data({wrap:s})}e(window).scroll()}function o(){e(window).scroll(function(n){function u(){r.toggleClass(t.toggleClass);r.css({top:r.data("top")})}var s=e(window).scrollTop();if(s-t.topPosWindow>=i.positionBlock.top-t.topPosblock){if(!i.isFix||i.isFix==null){r.css({opacity:0});r.css({top:t.topPosblock});r.toggleClass(t.toggleClass);if(r.data("opacity")==0){r.css({visibility:r.data("visibility")})}var o=t.opacityMouseOver?t.opacityHide:r.data("opacity");if(t.isCopy){r.wrap(r.data("wrap"))}r.stop().animate({opacity:o},t.showSpeed,"linear");i.isFix=true}}else{if(i.isFix||i.isFix==null){r.stop().animate({opacity:0},t.hideSpeed,"linear",function(){r.css({opacity:r.data("opacity")});if(r.data("opacity")==0){r.data({visibility:r.css("visibility")});r.css({visibility:"hidden"})}if(t.isCopy&&i.isFix!=null){r.unwrap();u()}});i.isFix=false}}});if(t.opacityMouseOver){r.mouseenter(function(e){if(i.isFix){var n=t.opacityShow?t.opacityShow:r.data("opacity");r.stop().animate({opacity:n},t.opacityShowSpeed,"linear")}});r.mouseleave(function(e){if(i.isFix){r.stop().animate({opacity:t.opacityHide},t.opacityHideSpeed,"linear")}})}}function u(e){if(e.getBoundingClientRect){return f(e)}else{return a(e)}}function a(e){var t=0,n=0;while(e){t=t+parseInt(e.offsetTop);n=n+parseInt(e.offsetLeft);e=e.offsetParent}return{top:t,left:n}}function f(e){var t=e.getBoundingClientRect();var n=document.body;var r=document.documentElement;var i=window.pageYOffset||r.scrollTop||n.scrollTop;var s=window.pageXOffset||r.scrollLeft||n.scrollLeft;var o=r.clientTop||n.clientTop||0;var u=r.clientLeft||n.clientLeft||0;var a=t.top+i-o;var f=t.left+s-u;return{top:Math.round(a),left:Math.round(f)}}var n={topPosblock:0,topPosWindow:0,isCopy:!0,showSpeed:400,hideSpeed:0,opacityMouseOver:!1,opacityInit:null,opacityShow:null,opacityHide:.4,opacityShowSpeed:400,opacityHideSpeed:400,toggleClass:"bondFix",wrapClass:"bondWrap"};var t=e.extend(n,t);t.effect="linear";var r=this;var i={isFix:null,positionBlock:null};o();s()}})(jQuery)